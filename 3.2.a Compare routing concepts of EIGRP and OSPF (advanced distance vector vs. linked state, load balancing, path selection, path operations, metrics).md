## EIGRP
| **Term** | **Definition** |
| --- | --- |
| Successor Route | The route with the lowest path metric to reach a destination |
| Successor | The first next-hop router for the successor route |
| Feasible Distance (FD) | The metric value for the lowest-metric path to reach a destination |
| Reported Distance (RD) | The distance reported by a router to reach a prefix. The reported distance value is the feasible distance for the advertising router |
| Feasibility Condition | For route to be considered a backup route, the RD received for that route must be less than the FD calculated locally. This logic guarantees a loop-free path |
| Feasible Successor | A route that satisfies the feasibility condition and is maintained as a backup route. It ensures that the backup route is loop-free |  

* EIGRP contains a topology table which is different from a true distance vector routing table. The table contains:
 * Network prefix
 * EIGRP neighbors that have advertised that prefix
 * Metrics from each neighbor
 * Values used for calculating the metric
* Default EIGRP hello timer is 5 seconds (60 seconds for T1 or lower)
* Default hold time value is 3 timex hello timer interval


## EIGRP Neighbors  
| **Type** | **Packet Name** | **Function** |
| --- | --- | --- |
| 1 | Hello | Used for discovery of EIGRP neighbors and for detecting when a neighbor is no longer available |
| 2 | Request | Used to get specific information from one or more neighbors |
| 3 | Update | Used to transmit routing and reachability information with other EIGRP neighbors |
| 4 | Query | Sent out to search for another path during convergence |
| 5 | Reply | Sent in response to a query packet |  


## EIGRP Load Balancing  
* Variance value - feasible distance (FD) multiplied by EIGRP variance multiplier  
* Variance multiplier - divide feasible successor metric by the successor route metric (whole number, round up any remainder)  


## EIGRP Convergence  
* When EIGRP detects lost successor, the feasible successor becomes the new successor route  
* If a feasible successor is not available for a prefix, DUAL must perform a new route calculation (route state changes from passive (P) to active (A))  
* Router receiving a query packet:  
  * Might reply to query that the router does not have a route to the prefix  
  * If query did not come from successor for that route, it detects the delay set for infinity but ignore it because it did not come from successor  
 if query came from successor for the route, the receiving router detects the delay set for infinity, sets prefix as active, and sends query packet to all downstream EIGRP neigbors  
 
 
## EIGRP Route Summarization  
* Summarizes network prefixes on an interface basis, summary aggregate is configured for the inteface  
* Prefixes within summary aggregate are suppressed, and summary aggregate prefix is advertised in lieu of the original prefixes  
* Summary aggregate prefix is not advertised until a prefix matches it  
* Summarization creates a query boundary and shrinks the routing table and the query domain when a route goes active during convergence  


## OSPF  
* provides scalability for the routing table by using multiple OSPF areas within routing domain  
* Area 0 is the backbone, which all other areas must connect  
* Non-backbone areas advertise routes into backbone, and backbone then advertises routes into other non-backbone areas  
* All routers in the same area has identical area LSDBs  
* OSPF process numbers are locally significant and do not have to match among routers  

| **Type** | **Packet Name** | **Functional Overview** |
| --- | --- | --- |
| 1 | Hello | For discovering and maintaining neighbors. Packets are sent periodically on all OSPF interfaces |
| 2 | Database Description (DBD or DDP) | For summarizing database contents. Packets are exchanged when an OSPF adjacency is first formed, and are used to desribe contents of LSDB |
| 3 | Link-State Request (LSR) | For database downloads. When router thinks that part of its LSDB is stale, it may request a portion of neighbor's database |
| 4 | Link-State Update (LSU) | For database updates. This is an explicit LSA for a specific network link and sent in direct response to an LSR |
| 5 | Link-State Ack | For flooding acknowledgements. Sent in response to the flooding of LSAs |  
* Router ID - 32-bit number that uniquely identifies an OSPF router, must be unique for each process in a domain  
* Neighbor states - Down, Attempt, Init, 2-Way, ExStart, Exchange, Loading, Full  


## OSPF Designated Router and Backup Designated Router  
 * Number of adjacencies: n(n - 1)/2  
 * Designated Router (DR):  
   * Router on the broadcast segment  
   * Reduces number of OSPF adjacencies by forming full OSPF adjacency with DR only  
   * Responsible for flooding updates to all OSPF routers on segment as updates occur  
 * Back Designated Router (BDR):  
   * Becomes new DR when original DR fails  
   * BDR also forms full OSPF adjacencies with OSPF routers on segment  
   * DROTHER routers do not establish full adjacency with other DROTHER routers
1. All OSPF routers (DR, BDR, DROTHER) on segment form full OSPF adjacencies with DR and BDR  
2. As OSPF router learns of a new route, it sends updated LSA to ALLDRouters address, which only DR and BDR receive and process  
3. DR sends unicast acknowledgement to router that sent the initial LSA update  
4. DR floods LSA to all routers on segment via the ALLSPFRouters address  


## OSPF Designated Router Elections  
* occurs during last phase of 2-Way neighbor state and before the ExStart state  
* Any router with OSPF priority of 1 to 255 attempts to become DR, default is 1  
* OSPF deems a router more perferable if the priority for the interface is highest in that segment  
* If OSPF priority is the same, the higher RID is more favorable  
* BDR follows the same logic but does not add its RID to the BDR field of hello packet  
* To configure OSPF priority (setting 0 removes interface from election:  
> **ip ospf priority (*0-255*)**  

> *[Back](https://github.com/network-dluong/CCNP-ENCOR/tree/3.0-Infrastructure)*  
