### AAA  
1. Create a local user with full privilege for fallback or to avoid being locked out after enabling AAA:  
> **username (*name*) privilege 15 algorithm-type {md5 | sha256 | scrypt}, secret (*secret*)**  
2. Enable AAA functions:  
> **aaa new-model**  
3. Add TACACS+ server using one of these methods:  
a. Before IOS version 15.x:  
  > **tacacs-server host {*hostname* | *host-ip-address*} key (*key-string*)**  
b. IOS version 15.x and later:  
  > **tacacs server (*name*)**  
  > **address ipv4 {*hostname* | *host-ip-address*} key (*key-string*)**  
4. Create AAA group:  
 > **aaa group server tacacs+ (*group-name*)**  
 > **server name (*server-name*)**  
a. Multiple server names can be added, and the order in which servers are added dictates failover order from top to bottom  
5. Enable AAA login authentication:  
 > **aaa authentication login {default | *custom-list-name*} method1 [method2...]**  
a. Method lists enable login authentication  
b. **Default** – applies the method lists that follow to all lines  
c. Apply custom list to a line: **login authentication (*custom-list-name*)**  
6. Enable AAA authorization for EXEC:  
> **aaa authorization exec {default | *custom-list-name*} method 1 [method 2...]**  
a. Enables EXEC shell authorization for all lines except console  
7. Enable AAA authorization for console (disabled by default):  
> **aaa authorization console**  
8. Enable AAA command authorization, authorizes all commands with AAA server before execution, per-privilege-level basis:  
> **aaa authorization commands {*privilege level*} {default | *custom-list-name*} method1 [method2…]**  
9. Enable command authorization in global configuration mode:  
> **aaa authorization config-commands**  
10. Enable login accounting, common to use start-stop:  
> **aaa accounting exec {default | *custom-list-name*} method1 [method2…]**  
11. Enable command accounting:  
> **aaa accounting commands {*privilege level*} {default | *custom-list-name*} method1 [method2…]**  
12. To verify:  
> **show privilege**; **show version**; **show running-config**  


### Zone-Based Firewall (ZBFW)  
* Reduces need for a firewall at a branch site to provide stateful network security  
* Router interfaces are assigned to a specific zone, maintains one-to-one or many-to-one relationship  
* Interfaces in same zone can communicate, but different zones cannot  
* The Self Zone – system-level zone, includes all routers’ IP addresses, traffic to and from this zone is permitted to support management and control plane functions  
* The Default Zone – system-level zone, any interface not a member of another zone is placed into this zone automatically, policy map can be created between two zones  
* ZBFW Configuration:  
1. Configure security zones. Zones needs to be created for outside zone (the Internet):  
> **zone security (*name*)**  
2. Define inspection class map: method for classification or traffic  
> **class-map type inspect {match-all | match-any} (*class-name*)**  
3. Define inspection policy map, which applies firewall policy actions to class maps. It has an implicit class default that uses default drop action  
> **policy-map type inspect (*policy-name*)**  
> **class type inspect (*class-name*)**  
a. **Drop [log]** – discards packets that match class map, adds syslog information including source and destination  
b. **Pass [log]** – makes router forward packets from source zone to destination zone, and only one direction. Policy must be applied for traffic to be forwarded in opposite direction. Useful for IPsec, ESP, and other secure protocols  
c. **Inspect** – offers state-based traffic control  
d. To show policy type: **show policy-map type inspect (*policy-name*)**  
4. Apply policy map to traffic flow source to destination  
> **zone-pair security (*zone-pair-name*) source (*source-zone-name*) destination (*destination-zone-name*)**  
a. Applied to zone pair  
> **service-policy type inspect (*policy-name*)**  
5. Apply security zones to appropriate interfaces  
> **interface (*id*)**  
> **zone-member security (*zone-name*)**  



