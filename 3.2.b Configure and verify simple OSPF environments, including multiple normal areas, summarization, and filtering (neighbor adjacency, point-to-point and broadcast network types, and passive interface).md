## OSPF Configuration  
* To define OSPF process:  
> **router ospf (*process-id*)**  
* Network statement uses wildcard mask, or Interface-specific configuration:  
> **network (*ip-address*) (*wildcard-mask*) area (*area-id*)**  
> **ip ospf (*process-id*) area (*area-id*) [secondaries none]**  
* To statically set the Router ID and restart the OSPF process:  
> **router-id (*router-id*)**    
> **clear ip ospf process**  
* To configure passive interface, no passive, or defaulting all as passive:  
> **passive (*int-id*)**  
> **no passive (*int-id*)**  
> **passive interface default**  
* To verify OSPF, OSPF Neighbors, and OSPF routes:  
> **show ip ospf interface [brief | (*int-id*)]**  
> **show ip ospf neighbor [detail]**  
> **show ip route ospf**  
* To advertise default rote into OSPF domain:  
> **default-information originate** **[always]** **[metric (*metric-value*)]** **[metric-type (*type-value*)]**  
* **always** - advertises default route even if it does not exist in RIB


## Requirements for Neighbor Adjacency  
* RIDs must be unique between devices  
* Interfaces must share a common subnet  
* MTUs on the interfaces must match. OSPF does not support fragmentation  
* Area ID must match for the segment  
* DR enablement must match for the segment  
* OSPF hello and dead timers must match for the segment  
* Authentication type and credentials must match for the segment  
* Area type flags must match for the segment  


## Common OSPF Optimizations  
* Link Costs = Reference Bandwidth / Interface Bandwidth  
 * Default reference bandwidth is 100 Mbps  
 
| **Interface Type** | **OSPF Cost** |
| --- | --- |
| T1 | 64 |
| Ethernet | 10 |
| FastEthernet | 1 |
| GigabitEthernet | 1 |
| 10 GigabitEthernet | 1 |  
* To change reference bandwidth (needs to be changed on all OSPF routers):  
> **auto-cost reference-bandwidth (*bandwidth-mbps*)**  
> **ip ospf cost (*1-65535*)**  
* To modify Hello Timer, Dead Interval Timer, and verify Timers:  
> **ip ospf hello-interval (*1-65535*)**  
> **ip ospf dead-interval (*1-65535*)**  
> **show ip ospf interface**  


## OSPF Network Types  
* **Broadcast**:  
 * Hello: 10, Wait: 40, Dead: 40  
 * Non-Broadcast - Hello: 30, Wait: 120, Dead: 120
 * OSPF network type is set to broadcast by default for Ethernet interfaces  
 * DR is required because multiple nodes can exist on a segment and LSA flooding needs to be controlled  
 * To override configured setting and statically set an interface as OSPF broadcast network type:  
 > **ip ospf network broadcast**  
 
* **Point-to-Point Networks**:  
 * Hello: 10, Wait: 40, Dead: 40  
 * Point-to-Multipoint - Hello: 30, Wait: 120, Dead: 120
 * Network circuit that only allows two devices to communicate and do not use ARP  
 * OSPF is set to P2P by default for serial interfaces (HDLC or PPP encapsulation), GRE tunnels, and P2P Frame Relay sub-interfaces  
 * Forms OSPF adjacency quickly because DR election is bypassed and there is no wait timer  
 * To set interface as OSPF P2P:  
 > **ip ospf network point-to-point**  
 
 * **Loopback Networks**:  
 * Enabled by default and can only be used on loopback interfaces  
 * IP address is always advertised with /32 prefix length even if configured otherwise  
  
  
 ## OSPF Areas  
 * Logical grouping of routers (or router interfaces) that is set at the interface level  
 * Area 0 is the backbone  
 * **Area Border Routers (ABR)** are OSPF routers connected to Area 0 and another OSPF Area  
    * Responsible for advertising routes from one area and injecting them into another OSPF area  
    * Will always need to participate in Area 0  
 
 * **OSPF Route Types**:  
   * **Intra-area routes** - network routes that are learned from other OSPF routers  
   * **Inter-area routes** - network routes that are learned from other OSPF routers from a different area using an ABR  
  
  
 ## Summarization of Routes  
 * Splitting up OSPF routing domain into multiple areas reduces size of the LSDB for each area  
 * Summarizing network prefixes can reduce size of the LSDB  
 * **Interarea Summarization**:  
  * Reduces number of type 3 LSAs that an ABR advertises into an area wiehn it receives type 1 LSAs  
  * OSPF behaves like EIGRP and checks every prefix within summarization range when a matching type 1 LSA is added or removed  
  * To define summarization range and associated area:  
  > **area (*area-id*) range (*network*) (*subnet-mask*)** **[advertise | not-advertise]** **[cost (*metric*)]**  
  
## Route Filtering  
* Method for selectively identifying routes that are advertised or received from neighbor routers  
* Used to manipulate traffic flows, reduce memory utilization, or improve security 

* **Filtering with summarization**:  
  * **not-advertise** - prevents creation of type 3 LSAs for any networks in range  
  > **area (*area-id*) range (*network*) (*subnet-mask*) not-advertise**  
  
* **Area Filtering**:  
  * Can occur in either direction on the ABR  
  * To enable OSPF area filtering on ABR:  
 > **area (*area-id*) filter-list prefix (*prefix-list-name*) {in | out}**  
 
* **Local OSPF Filtering**:  
  * **Distribute list** - prevents type 3 LSAs coming from backbone frome being regenerated into nonbackbone areas on an ABR
 > **distribute-list {*(acl-number)* | *(acl-name)* | prefix (*prefix-list-name*) | routep-map (*route-map-name*)} in**  
 
 
 
