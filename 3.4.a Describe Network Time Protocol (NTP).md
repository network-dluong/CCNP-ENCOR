### NTP (Network Time Protocol)  
* Used to synchronize a set of network clocks in a distributed client/server architecture  
* UDP port 123, client source port is dynamic  
* Uses concept of stratums to identify accuracy of time clock source  
* NTP servers directly attached to authoritative time source = stratum 1 server  
* NTP client that queries stratum 1 servers = stratum 2 client  


### NTP Configuration  
1. To configure NTP server:  
> **ntp server (*ip-address*) [prefer] [source (*interface-id*)]**
2. To statically set stratum for device when it acts as an NTP server:  
> **ntp master (*stratum-number*)**  
3. To show ntp status:  
> **show ntp status**  
* ntp status shows the following:  
  * Hardware clock synchronized to software clock, stratum reference of local device, and reference clock identifier  
  * Frequency and precision of clock  
  * NTP uptime and granularity  
  * Reference time  
  * Clock offset and delay between client and lower-level stratum server  
  * Root dispersion (calculated error of actual clock attached to atomic clock) and peer dispersion (root dispersion plus estimated time to reach root NTP server)  
  * NTP loop-filter  
  * Polling interval and time since last update  
4. Streamlined version of NTP server status and delay:  
> **show ntp associations**  


### Stratum Preference and Peers  
* To show NTP peers:  
> **ntp peer (*ip-address*)**  
* NTP client can be configured with multiple NTP servers, but device will use NTP server with lowest stratum  
* NTP client changes its time to the NTP server  
* Common scenario is to designate two devices to query a different external NTP source and then to peer their local stratum 2 NTP devices  
* NTP peers act as clients and servers to each other (blend their time to each other)  
* NTP peer that is configured with an authoritative time source treats its peer as an equal and shifts clock to synchronize with peer  


> *[Back](https://github.com/network-dluong/CCNP-ENCOR/tree/3.0-Infrastructure)*
